diff -ru groonga-1.2.3.orig/src/groonga.c groonga-1.2.3/src/groonga.c
--- groonga-1.2.3.orig/src/groonga.c	2011-06-28 21:51:56.617954085 +0900
+++ groonga-1.2.3/src/groonga.c	2011-07-04 11:48:54.453158255 +0900
@@ -198,7 +198,7 @@
         p += wcrtomb(p, es[i], &ps);
       }
       p[0] = '\0';
-      len = p - buf;
+      len = p - (char *)buf;
     } else {
       len = 0;
     }
